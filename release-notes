Release Notes - cita-uiauto-engine v1.1.0  
Release Date: 2026-02-01  
Release Type: Minor Release (New Features)

## ðŸŽ¯ Ã–zet  
Bu sÃ¼rÃ¼m, UI otomasyon framework'Ã¼ne geliÅŸmiÅŸ bekleme ve yeniden deneme mekanizmalarÄ± eklemektedir. En Ã¶nemli eklenti, orijinal exception'larÄ± koruyarak debugging sÃ¼recini Ã¶nemli Ã¶lÃ§Ã¼de kolaylaÅŸtÄ±ran `wait_until_passes` fonksiyonudur.

## âœ¨ Yeni Ã–zellikler  

### wait_until_passes Fonksiyonu  
Bir fonksiyonu, belirtilen exception'larÄ± fÄ±rlatmayÄ± bÄ±rakana kadar veya timeout dolana kadar tekrar tekrar Ã§alÄ±ÅŸtÄ±rÄ±r. Orijinal exception korunarak debug kolaylÄ±ÄŸÄ± saÄŸlar.

```python
from uiauto.waits import wait_until_passes

result = wait_until_passes(
    my_function,
    timeout=10,
    interval=0.5,
    exceptions=(ElementNotFoundError,),
    description="clicking submit button"
)
```

Ã–nemli Ã–zellikler:
- Orijinal exception `TimeoutError.original_exception` attribute'unda saklanÄ±r
- Deneme sayÄ±sÄ± `TimeoutError.attempt_count` ile eriÅŸilebilir
- GeÃ§en sÃ¼re `TimeoutError.elapsed_time` ile takip edilebilir
- ArgÃ¼man desteÄŸi: `*args` ve `**kwargs` fonksiyona aktarÄ±lÄ±r

---

### wait_until_not Fonksiyonu  
Bir koÅŸulun false olmasÄ±nÄ± bekler. Loading spinner'larÄ±n kaybolmasÄ±, modal'larÄ±n kapanmasÄ± gibi senaryolar iÃ§in idealdir.

```python
from uiauto.waits import wait_until_not

wait_until_not(
    lambda: spinner.is_visible(),
    timeout=30,
    description="loading spinner to disappear"
)
```

---

### wait_for_any Fonksiyonu  
Birden fazla koÅŸuldan herhangi birinin true olmasÄ±nÄ± bekler. BaÅŸarÄ± mesajÄ± veya hata dialogu gibi alternatif UI durumlarÄ±nÄ± handle etmek iÃ§in kullanÄ±lÄ±r.

```python
from uiauto.waits import wait_for_any

result_index = wait_for_any(
    [
        lambda: success_label.is_visible(),
        lambda: error_dialog.exists(),
    ],
    timeout=10,
    descriptions=["success message", "error dialog"]
)

if result_index == 0:
    print("Success!")
else:
    print("Error occurred")
```

### retry Fonksiyonu  
Timeout yerine deneme sayÄ±sÄ±na gÃ¶re yeniden deneme yapar. Flaky operasyonlar iÃ§in uygundur.

```python
from uiauto.waits import retry

result = retry(
    flaky_operation,
    max_attempts=3,
    interval=0.5,
    exceptions=(Exception,),
    description="flaky operation"
)
```

## ðŸ”§ Ä°yileÅŸtirmeler  

TimeoutError sÄ±nÄ±fÄ± geniÅŸletildi. `TimeoutError` exception'Ä± artÄ±k debugging iÃ§in kritik bilgileri iÃ§ermektedir:

Attribute | Tip | AÃ§Ä±klama  
--- | --- | ---  
`original_exception` | `BaseException` | Son fÄ±rlatÄ±lan exception  
`description` | `str` | Ä°nsan-okunabilir aÃ§Ä±klama  
`timeout` | `float` | Timeout sÃ¼resi (saniye)  
`attempt_count` | `int` | Toplam deneme sayÄ±sÄ±  
`elapsed_time` | `float` | GeÃ§en sÃ¼re (saniye)  

### Yeni Metodlar:

```python
# KÃ¶k neden exception'Ä±nÄ± al
root_cause = error.get_root_cause()

# Formatted traceback string al
traceback_str = error.get_traceback_str()
```

### wait_until Fonksiyonu GÃ¼ncellendi  

Ã–nceki davranÄ±ÅŸ:

```python
# Exception string'e dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lÃ¼yor, stack trace kayboluyor
raise TimeoutError(f"...{last_exc}")
```

Yeni davranÄ±ÅŸ:

```python
# Exception korunuyor, stack trace eriÅŸilebilir
error = TimeoutError("...")
error.original_exception = last_exception
raise error
```

## ðŸ†• Yeni Exception SÄ±nÄ±flarÄ±  

### ElementNotVisibleError  
Element mevcut ama gÃ¶rÃ¼nÃ¼r deÄŸilken fÄ±rlatÄ±lÄ±r.

```python
from uiauto.exceptions import ElementNotVisibleError

raise ElementNotVisibleError("submit_button", "Element is hidden behind modal")
```

### ElementNotEnabledError  
Element gÃ¶rÃ¼nÃ¼r ama aktif deÄŸilken fÄ±rlatÄ±lÄ±r.

```python
from uiauto.exceptions import ElementNotEnabledError

raise ElementNotEnabledError("submit_button", "Button is disabled")
```

### StaleElementError  
Cache'lenmiÅŸ element referansÄ± artÄ±k geÃ§erli deÄŸilken fÄ±rlatÄ±lÄ±r.

```python
from uiauto.exceptions import StaleElementError

raise StaleElementError("dynamic_element", "Page was refreshed")
```

### ðŸ“ DeÄŸiÅŸen Dosyalar  

Dosya | DeÄŸiÅŸiklik Tipi | AÃ§Ä±klama  
--- | --- | ---  
`uiauto/waits.py` | ðŸ”„ GÃ¼ncellendi | 4 yeni fonksiyon eklendi, wait_until iyileÅŸtirildi  
`uiauto/exceptions.py` | ðŸ”„ GÃ¼ncellendi | TimeoutError geniÅŸletildi, 3 yeni exception eklendi  
`tests/test_waits.py` | âž• Yeni | KapsamlÄ± test suite eklendi  

## ðŸ“Š API DeÄŸiÅŸiklikleri  

Bu sÃ¼rÃ¼m geriye uyumludur. Mevcut kodlar deÄŸiÅŸiklik olmadan Ã§alÄ±ÅŸmaya devam edecektir.

Yeni Public API  

```python
# waits.py
wait_until_passes(func, timeout, interval=0.2, exceptions=(Exception,), description="operation", *args, **kwargs) -> T
wait_until_not(predicate, timeout, interval=0.2, description="condition") -> None
wait_for_any(predicates, timeout, interval=0.2, descriptions=None) -> int
retry(func, max_attempts=3, interval=0.5, exceptions=(Exception,), description="operation", *args, **kwargs) -> T

# exceptions.py
class ElementNotVisibleError(UIAutoError)
class ElementNotEnabledError(UIAutoError)
class StaleElementError(UIAutoError)

# TimeoutError yeni attribute'lar
TimeoutError.original_exception: Optional[BaseException]
TimeoutError.description: Optional[str]
TimeoutError.timeout: Optional[float]
TimeoutError.attempt_count: Optional[int]
TimeoutError.elapsed_time: Optional[float]
TimeoutError.get_root_cause() -> Optional[BaseException]
TimeoutError.get_traceback_str() -> str
```

## ðŸ§ª Test Coverage  

Yeni eklenen `tests/test_waits.py` dosyasÄ± aÅŸaÄŸÄ±daki test sÄ±nÄ±flarÄ±nÄ± iÃ§ermektedir:

Test SÄ±nÄ±fÄ± | Test SayÄ±sÄ± | Kapsam  
--- | --- | ---  
`TestWaitUntil` | 5 | Temel bekleme fonksiyonelliÄŸi  
`TestWaitUntilPasses` | 5 | Exception handling ve retry logic  
`TestWaitUntilNot` | 2 | Negatif koÅŸul bekleme  
`TestWaitForAny` | 3 | Ã‡oklu koÅŸul bekleme  
`TestRetry` | 3 | Deneme sayÄ±sÄ± bazlÄ± retry  
`TestTimeoutErrorAttributes` | 2 | Exception attribute'larÄ±  
**Toplam** | 20 |  |

**Testleri Ã§alÄ±ÅŸtÄ±rma:**

```bash
pytest tests/test_waits.py -v
```

## ðŸ“– KullanÄ±m Ã–rnekleri  

**Senaryo 1:** Dinamik Element Bekleme  

```python
from uiauto.waits import wait_until_passes
from uiauto.exceptions import ElementNotFoundError

def click_dynamic_button():
    element = resolver.resolve("dynamic_button")
    element.click()
    return element

try:
    result = wait_until_passes(
        click_dynamic_button,
        timeout=30,
        interval=1.0,
        exceptions=(ElementNotFoundError,),
        description="clicking dynamic button"
    )
except TimeoutError as e:
    print(f"Failed after {e.attempt_count} attempts")
    print(f"Last error: {e.original_exception}")
    print(f"Traceback:\n{e.get_traceback_str()}")
```

**Senaryo 2:** Form Submit SonrasÄ± Bekleme  

```python
from uiauto.waits import wait_for_any

def check_success():
    try:
        return resolver.resolve("success_toast").is_visible()
    except:
        return False

def check_error():
    try:
        return resolver.resolve("error_message").is_visible()
    except:
        return False

# Submit butonuna tÄ±kla
actions.click("submit_button")

# Sonucu bekle
result = wait_for_any(
    [check_success, check_error],
    timeout=15,
    descriptions=["success toast", "error message"]
)

if result == 0:
    print("Form submitted successfully!")
else:
    error_text = resolver.resolve("error_message").get_text()
    print(f"Form error: {error_text}")
```

**Senaryo 3:** Loading Durumu YÃ¶netimi  

```python
from uiauto.waits import wait_until_not

# Submit iÅŸlemi baÅŸlat
actions.click("submit_button")

# Loading spinner'Ä±n kaybolmasÄ±nÄ± bekle
wait_until_not(
    lambda: resolver.resolve("loading_spinner").is_visible(),
    timeout=60,
    interval=0.5,
    description="loading to complete"
)

# Ä°ÅŸlem tamamlandÄ±
print("Operation complete!")
```

## âš ï¸ Breaking Changes  

Bu sÃ¼rÃ¼mde breaking change bulunmamaktadÄ±r.  
TÃ¼m mevcut API'ler geriye uyumlu ÅŸekilde korunmuÅŸtur.

## ðŸ”œ Sonraki SÃ¼rÃ¼mde Planlanan  
- ActionLogger entegrasyonu  
- TimeConfig sistemi  
- Element Overlay (Recorder iÃ§in)  
- Multi-Strategy Element Identification  


> **Full Changelog: v1.0.0...v1.1.0**
